@model EveFirstMate.ViewModels.EveViewModel

@{
    ViewBag.Title = "Home";
}

@helper ShowTree(ICollection<EveFirstMate.Models.invMarketGroup> groups) {
    <ul>
        @foreach(var group in groups) 
        {
        <li>
            @if (group.invMarketGroups1.Any()) 
            {
                if (group.iconID.HasValue)
                {
                    
                }
                <a href="#">@group.marketGroupName</a>
                <ul>
                    @ShowTree(group.invMarketGroups1)
                </ul>
            }
            else
            {
                <a href="#" data-group-leaf="true">@group.marketGroupName</a>
                @ShowLeaf(group.invTypes)
            }
        </li>
        }
    </ul>
}

@helper ShowLeaf(ICollection<EveFirstMate.Models.invType> items) {
    <ul>
        @foreach (var item in items)
        {
            <li>@item.typeName</li>
        }
    </ul>
}

<section id="items">
    <menu id="marketGroups">
        <ul>
        @foreach (var group in Model.marketGroups)
        {
            <li>
                <a href="#">@group.marketGroupName</a>
                @ShowTree(group.invMarketGroups1)
            </li>
        }
        </ul>
    </menu>
</section>
<section id="fitting">
    <div>
        <span>This is where the ship goes.</span>
    </div>
</section>
